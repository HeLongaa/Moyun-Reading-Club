"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[810],{4810:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var o=a(641);const s={class:"shared-books"};function r(e,t,a,r,n,d){const l=(0,o.g2)("el-table-column"),i=(0,o.g2)("el-button"),c=(0,o.g2)("el-table");return(0,o.uX)(),(0,o.CE)("div",s,[t[1]||(t[1]=(0,o.Lk)("h2",null,"共享图书",-1)),(0,o.bF)(c,{data:n.books,style:{width:"100%"}},{default:(0,o.k6)((()=>[(0,o.bF)(l,{prop:"title",label:"书名"}),(0,o.bF)(l,{prop:"author",label:"作者"}),(0,o.bF)(l,{label:"操作",width:"180"},{default:(0,o.k6)((({row:e})=>[(0,o.bF)(i,{size:"mini",type:"danger",onClick:t=>d.handleUnshare(e.id)},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)(" 取消共享 ")]))),_:2,__:[0]},1032,["onClick"])])),_:1})])),_:1},8,["data"])])}var n=a(6278);const d={name:"SharedBooks",data(){return{books:[],loading:!1}},computed:{...(0,n.aH)("circles",["currentCircle"])},created(){this.fetchSharedBooks()},methods:{...(0,n.i0)("books",["getSharedBooks","unshareBook"]),async fetchSharedBooks(){this.loading=!0;try{const e=await this.getSharedBooks(this.currentCircle.id);this.books=e.data}finally{this.loading=!1}},async handleUnshare(e){await this.unshareBook({bookId:e,circleId:this.currentCircle.id}),this.$message.success("已取消共享"),this.fetchSharedBooks()}}};var l=a(6262);const i=(0,l.A)(d,[["render",r],["__scopeId","data-v-4f32209c"]]),c=i}}]);
//# sourceMappingURL=810.372fc777.js.map