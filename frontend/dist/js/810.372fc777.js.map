{"version":3,"file":"js/810.372fc777.js","mappings":"6JACOA,MAAM,gB,6HAAX,QAkBM,MAlBN,EAkBM,C,aAjBJ,QAAa,UAAT,QAAI,KAER,QAcW,GAdAC,KAAM,EAAAC,MAAOC,MAAA,gB,mBACtB,IAA2C,EAA3C,QAA2C,GAA1BC,KAAK,QAAQC,MAAM,QACpC,QAA4C,GAA3BD,KAAK,SAASC,MAAM,QACrC,QAUkB,GAVDA,MAAM,KAAKC,MAAM,O,CACrBC,SAAO,SAChB,EADoBC,SAAG,EACvB,QAMY,GALVC,KAAK,OACLC,KAAK,SACJ,QAAK,GAAE,EAAAC,cAAcH,EAAII,K,mBAC3B,IAED,c,QAFC,c,2EAYX,SACEC,KAAM,cAEN,IAAAZ,GACE,MAAO,CACLC,MAAO,GACPY,SAAS,EAEb,EAEAC,SAAU,KACL,QAAS,UAAW,CAAC,mBAG1B,OAAAC,GACEC,KAAKC,kBACP,EAEAC,QAAS,KACJ,QAAW,QAAS,CAAC,iBAAkB,gBAE1C,sBAAMD,GACJD,KAAKH,SAAU,EACf,IACE,MAAMM,QAAYH,KAAKI,eAAeJ,KAAKK,cAAcV,IACzDK,KAAKf,MAAQkB,EAAInB,IACnB,CAAE,QACAgB,KAAKH,SAAU,CACjB,CACF,EAEA,mBAAMH,CAAcY,SACZN,KAAKO,YAAY,CACrBD,SACAE,SAAUR,KAAKK,cAAcV,KAE/BK,KAAKS,SAASC,QAAQ,SACtBV,KAAKC,kBACP,I,cCxDJ,MAAMU,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,G","sources":["webpack://frontend/./src/views/Books/SharedBooks.vue","webpack://frontend/./src/views/Books/SharedBooks.vue?22df"],"sourcesContent":["<template>\r\n  <div class=\"shared-books\">\r\n    <h2>共享图书</h2>\r\n    \r\n    <el-table :data=\"books\" style=\"width: 100%\">\r\n      <el-table-column prop=\"title\" label=\"书名\" />\r\n      <el-table-column prop=\"author\" label=\"作者\" />\r\n      <el-table-column label=\"操作\" width=\"180\">\r\n        <template #default=\"{ row }\">\r\n          <el-button \r\n            size=\"mini\" \r\n            type=\"danger\"\r\n            @click=\"handleUnshare(row.id)\"\r\n          >\r\n            取消共享\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\n\r\nexport default {\r\n  name: 'SharedBooks',\r\n  \r\n  data() {\r\n    return {\r\n      books: [],\r\n      loading: false\r\n    }\r\n  },\r\n  \r\n  computed: {\r\n    ...mapState('circles', ['currentCircle'])\r\n  },\r\n  \r\n  created() {\r\n    this.fetchSharedBooks()\r\n  },\r\n  \r\n  methods: {\r\n    ...mapActions('books', ['getSharedBooks', 'unshareBook']),\r\n    \r\n    async fetchSharedBooks() {\r\n      this.loading = true\r\n      try {\r\n        const res = await this.getSharedBooks(this.currentCircle.id)\r\n        this.books = res.data\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async handleUnshare(bookId) {\r\n      await this.unshareBook({\r\n        bookId,\r\n        circleId: this.currentCircle.id\r\n      })\r\n      this.$message.success('已取消共享')\r\n      this.fetchSharedBooks()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.shared-books {\r\n  padding: 20px;\r\n}\r\n</style>","import { render } from \"./SharedBooks.vue?vue&type=template&id=4f32209c&scoped=true\"\nimport script from \"./SharedBooks.vue?vue&type=script&lang=js\"\nexport * from \"./SharedBooks.vue?vue&type=script&lang=js\"\n\nimport \"./SharedBooks.vue?vue&type=style&index=0&id=4f32209c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f32209c\"]])\n\nexport default __exports__"],"names":["class","data","books","style","prop","label","width","default","row","size","type","handleUnshare","id","name","loading","computed","created","this","fetchSharedBooks","methods","res","getSharedBooks","currentCircle","bookId","unshareBook","circleId","$message","success","__exports__","render"],"sourceRoot":""}