{"version":3,"file":"js/948.501d1dbc.js","mappings":"+KACOA,MAAM,mB,GAGJA,MAAM,c,eAUJA,MAAM,iB,GAORA,MAAM,a,SAOWA,MAAM,W,GAKvBA,MAAM,c,qGAhCb,QA+CM,MA/CN,EA+CM,C,aA9CJ,QAAa,UAAT,QAAI,KAER,QAeM,MAfN,EAeM,E,SAdJ,QAOS,U,qCAPQ,EAAAC,QAAgB,a,cAC/B,QAA8B,UAAtBC,MAAM,IAAG,QAAI,M,aACrB,QAIS,mBAJkB,EAAAC,YAAZC,K,WAAf,QAIS,UAHAC,IAAKD,EACLF,MAAOE,I,QACXA,GAAQ,Q,mBALE,EAAAH,QAAQG,aASzB,QAIM,MAJN,EAIM,C,aAHJ,QAAoB,aAAb,SAAK,K,SACZ,QAAgE,SAAzDE,KAAK,QAAQC,IAAI,IAAIC,IAAI,I,qCAAa,EAAAP,QAAiB,c,iBAAjB,EAAAA,QAAQQ,c,QAAW,KAChE,QAAG,EAAAR,QAAQQ,WAAS,QAIxB,QAUM,MAVN,EAUM,G,aATJ,QAIE,mBAHiB,EAAAC,iBAARC,K,WADX,QAIE,GAFGN,IAAKM,EAAKC,GACVD,KAAMA,G,0BAGA,EAAO,U,WAAlB,QAEM,MAFN,EAAoC,c,kBAKtC,QAcM,MAdN,EAcM,EAbJ,QAIS,UAHJ,QAAK,oBAAE,EAAAE,UAAA,EAAAA,YAAA,IACPC,SAA0B,IAAhB,EAAAC,aAAmB,QAElC,MAEA,QAAkC,YAA5B,MAAE,QAAG,EAAAA,aAAc,KAAE,IAE3B,QAIS,UAHJ,QAAK,oBAAE,EAAAC,UAAA,EAAAA,YAAA,IACPF,SAAU,EAAAC,cAAgB,EAAAE,YAAY,QAE3C,Q,CAMN,SACE,IAAAC,GACE,MAAO,CACLH,YAAa,EACbE,WAAY,EACZhB,QAAS,CACPG,SAAU,GACVK,UAAW,GAEbU,SAAS,EAEb,EACAC,SAAU,CACR,eAAAV,GACE,OAAOW,KAAKC,OAAOC,QAAQ,yBAC7B,EACA,UAAApB,GACE,OAAOkB,KAAKC,OAAOE,MAAMC,MAAMtB,UACjC,GAEFuB,QAAS,CACP,yBAAMC,GACJN,KAAKF,SAAU,EACf,UACQE,KAAKC,OAAOM,SAAS,8BAA+B,CACxDC,KAAMR,KAAKN,eACRM,KAAKpB,SAEZ,CAAE,QACAoB,KAAKF,SAAU,CACjB,CACF,EACA,QAAAH,GACMK,KAAKN,YAAcM,KAAKJ,aAC1BI,KAAKN,cACLM,KAAKM,sBAET,EACA,QAAAd,GACMQ,KAAKN,YAAc,IACrBM,KAAKN,cACLM,KAAKM,sBAET,GAEFG,MAAO,CACL7B,QAAS,CACP8B,MAAM,EACN,OAAAC,GACEX,KAAKN,YAAc,EACnBM,KAAKM,qBACP,IAGJ,OAAAM,GACEZ,KAAKM,qBACP,G,cCvGF,MAAMO,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,G","sources":["webpack://frontend/./src/views/Books/Recommendations.vue","webpack://frontend/./src/views/Books/Recommendations.vue?7174"],"sourcesContent":["<template>\r\n  <div class=\"recommendations\">\r\n    <h2>为您推荐</h2>\r\n\r\n    <div class=\"filter-bar\">\r\n      <select v-model=\"filters.category\">\r\n        <option value=\"\">所有分类</option>\r\n        <option v-for=\"category in categories\"\r\n                :key=\"category\"\r\n                :value=\"category\">\r\n          {{ category }}\r\n        </option>\r\n      </select>\r\n\r\n      <div class=\"rating-filter\">\r\n        <label>最低评分：</label>\r\n        <input type=\"range\" min=\"0\" max=\"5\" v-model=\"filters.minRating\">\r\n        {{ filters.minRating }}\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"book-list\">\r\n      <BookCard\r\n          v-for=\"book in recommendations\"\r\n          :key=\"book.id\"\r\n          :book=\"book\"\r\n      />\r\n\r\n      <div v-if=\"loading\" class=\"loading\">\r\n        加载中...\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"pagination\">\r\n      <button\r\n          @click=\"prevPage\"\r\n          :disabled=\"currentPage === 1\">\r\n        上一页\r\n      </button>\r\n\r\n      <span>第 {{ currentPage }} 页</span>\r\n\r\n      <button\r\n          @click=\"nextPage\"\r\n          :disabled=\"currentPage === totalPages\">\r\n        下一页\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      totalPages: 1,\r\n      filters: {\r\n        category: '',\r\n        minRating: 0\r\n      },\r\n      loading: false\r\n    };\r\n  },\r\n  computed: {\r\n    recommendations() {\r\n      return this.$store.getters['books/recommendedBooks'];\r\n    },\r\n    categories() {\r\n      return this.$store.state.books.categories;\r\n    }\r\n  },\r\n  methods: {\r\n    async loadRecommendations() {\r\n      this.loading = true;\r\n      try {\r\n        await this.$store.dispatch('books/fetchRecommendedBooks', {\r\n          page: this.currentPage,\r\n          ...this.filters\r\n        });\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    nextPage() {\r\n      if (this.currentPage < this.totalPages) {\r\n        this.currentPage++;\r\n        this.loadRecommendations();\r\n      }\r\n    },\r\n    prevPage() {\r\n      if (this.currentPage > 1) {\r\n        this.currentPage--;\r\n        this.loadRecommendations();\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    filters: {\r\n      deep: true,\r\n      handler() {\r\n        this.currentPage = 1;\r\n        this.loadRecommendations();\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.loadRecommendations();\r\n  }\r\n};\r\n</script>","import { render } from \"./Recommendations.vue?vue&type=template&id=4dcdb723\"\nimport script from \"./Recommendations.vue?vue&type=script&lang=js\"\nexport * from \"./Recommendations.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","filters","value","categories","category","key","type","min","max","minRating","recommendations","book","id","prevPage","disabled","currentPage","nextPage","totalPages","data","loading","computed","this","$store","getters","state","books","methods","loadRecommendations","dispatch","page","watch","deep","handler","created","__exports__","render"],"sourceRoot":""}